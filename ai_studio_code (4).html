<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tweet Generator ‚Äî Authentic Icons</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --card-w:500px;
      --accent:#1d9bf0;
      --muted:#71767b;
      --text-light:#0f1419;
      --text-dark:#e7e9ea;
      --bg-dim:#15202b;
      --bg-dark:#000000;
      --border-light:#eff3f4;
      --border-dark:#2f3336;
    }
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, Roboto, Arial; margin:14px; background:#f3f4f6; color:#0f1724;}
    .container{max-width:1200px; margin:0 auto; display:flex; gap:20px; align-items:flex-start; padding-bottom:40px;}
    .panel{width:360px; background:#fff; border-radius:10px; padding:16px; box-shadow:0 6px 18px rgba(15,23,42,0.06);}
    h2{margin:0 0 6px 0; font-size:18px;}
    label{display:block; font-size:13px; color:#536471; margin-top:10px;}
    input[type="text"], input[type="datetime-local"], textarea, select{width:100%; padding:8px 10px; margin-top:6px; border-radius:6px; border:1px solid #e6e9ee; font-size:15px;}
    textarea{min-height:100px; resize:vertical;}
    .row{display:flex; gap:8px;}
    .btn{display:inline-block; padding:10px 14px; border-radius:8px; cursor:pointer; border:none; font-weight:600;}
    .btn-primary{background:var(--accent); color:white;}
    .btn-ghost{background:#f1f5f9; color:#0f1724;}
    .tweet-wrap{flex:1; min-width:320px; display:flex; justify-content:center; align-items:flex-start; flex-direction:column;}
    
    /* Tweet card */
    .tweet-card{width:100%; max-width:var(--card-w); border:1px solid var(--border-light); padding:16px; box-sizing:border-box; position:relative; overflow:hidden; background:white;}
    .card-header{display:flex; gap:12px; align-items:center;}
    .avatar{width:48px; height:48px; border-radius:50%; background:#d1d5db; flex:0 0 48px; display:flex; align-items:center; justify-content:center; color:#fff; font-weight:700; font-size:16px; overflow:hidden; background-size:cover; background-position:center;}
    
    .name-line{display:flex; gap:4px; align-items:center; flex-wrap:wrap;}
    .display-name{font-weight:700; font-size:15px; color:var(--text-light);}
    .handle{color:var(--muted); font-size:14px;}
    .verified{display:inline-flex; align-items:center; justify-content:center; width:18px; height:18px; background:linear-gradient(135deg,#1da1f2,#1a8bd8); color:white; border-radius:50%; font-size:10px; margin-left:4px;}
    
    .tweet-text{margin-top:12px; font-size:17px; line-height:1.4; white-space:pre-wrap; color:var(--text-light);}
    
    .tweet-meta{margin-top:12px; color:var(--muted); font-size:15px; display:flex; gap:6px; flex-wrap:wrap; border-bottom:1px solid var(--border-light); padding-bottom:14px;}
    .counts{display:flex; gap:20px; margin-top:14px; color:var(--muted); font-size:15px; border-bottom:1px solid var(--border-light); padding-bottom:14px;}
    .counts div{display:flex; gap:4px; align-items:center;}
    .counts strong{color:var(--text-light); font-weight:700;}
    
    /* ICONS FIXED */
    .tweet-actions{display:flex; justify-content:space-around; align-items:center; margin-top:14px; color:var(--muted); padding:0 4px;}
    .action-icon{width:22px; height:22px; fill:currentColor;}
    
    /* Themes */
    .dark .tweet-card{background:var(--bg-dark); color:var(--text-dark); border-color:var(--border-dark);}
    .dark .display-name, .dark .tweet-text, .dark .counts strong{color:var(--text-dark);}
    .dark .handle, .dark .tweet-meta, .dark .counts, .dark .tweet-actions{color:#71767b;}
    .dark .tweet-meta, .dark .counts{border-color:var(--border-dark);}

    .dim .tweet-card{background:var(--bg-dim); color:var(--text-dark); border-color:#38444d;}
    .dim .display-name, .dim .tweet-text, .dim .counts strong{color:var(--text-dark);}
    .dim .handle, .dim .tweet-meta, .dim .counts, .dim .tweet-actions{color:#8b98a5;}
    .dim .tweet-meta, .dim .counts{border-color:#38444d;}

    .out-area img{max-width:100%; border:1px solid #e6e9ee; border-radius:10px; margin-top:8px;}
    @media (max-width:1000px){ .container{flex-direction:column;} .panel{width:100%} .tweet-wrap{width:100%; align-items:center;} }
  </style>
</head>
<body>
  <div style="max-width:1200px;margin:10px auto 0;padding:0 10px;">
    <h1 style="font-size:20px;margin:6px 0;">Tweet Generator (Fixed Icons)</h1>
    <p style="margin:0;color:#374151;">Authentic mobile app style.</p>
  </div>

  <div class="container" id="app">
    <div class="panel">
      <h2>Controls</h2>
      <label>Display name <input id="inputName" type="text" value="Anime world"></label>
      <label>Username (without @) <input id="inputHandle" type="text" value="animeworld"></label>
      <label>Profile picture <input id="inputAvatar" type="file" accept="image/*"></label>
      <label>Tweet text <textarea id="inputText">Naruto v/s Sasuke is the greatest battle in anime history. üçúüç•</textarea></label>
      <label>Date & time <input id="inputTime" type="datetime-local"></label>

      <div class="row" style="margin-top:6px;">
        <div style="flex:1">
          <label>Background
            <select id="bgMode">
              <option value="light">Light</option>
              <option value="dim">Dim (Dark Blue)</option>
              <option value="dark">Dark (Black)</option>
            </select>
          </label>
        </div>
        <div style="flex:1">
          <label>Font
            <select id="fontMode">
              <option value="inter">Inter</option>
              <option value="system">System</option>
            </select>
          </label>
        </div>
      </div>

      <div style="display:flex; gap:8px; margin-top:10px;">
        <label style="flex:1"><input id="verified" type="checkbox"> Verified</label>
        <label style="flex:1"><input id="showAvatar" type="checkbox" checked> Avatar</label>
      </div>

      <label style="margin-top:8px">Counts
        <div class="row" style="margin-top:6px;">
          <input id="likes" type="text" value="25K" placeholder="Likes" style="width:32%;">
          <input id="retweets" type="text" value="12K" placeholder="RTs" style="width:32%;">
          <input id="quotes" type="text" value="5K" placeholder="Qts" style="width:32%;">
        </div>
      </label>

      <div style="display:flex; gap:8px; margin-top:12px;">
        <button id="randomize" class="btn btn-ghost">Randomize</button>
        <button id="previewBtn" class="btn btn-ghost">Preview</button>
        <button id="genBtn" class="btn btn-primary">Generate Image</button>
      </div>
    </div>

    <div class="tweet-wrap" id="previewWrap">
      <div id="previewArea" class="tweet-card light" style="transform-origin:top left;">
        <div class="card-header">
          <div id="avatarEl" class="avatar">AW</div>
          <div>
            <div class="name-line">
              <div class="display-name" id="nameEl">Anime world</div>
              <div id="verifiedEl" class="verified" style="display:none">‚úì</div>
            </div>
            <div class="handle" id="handleEl">@animeworld</div>
          </div>
        </div>

        <div class="tweet-text" id="textEl">Naruto v/s Sasuke is the greatest battle in anime history. üçúüç•</div>

        <div class="tweet-meta" id="timeEl">5:29 PM ¬∑ Nov 5, 2025</div>

        <div class="counts" id="countsEl">
          <div><strong id="rtCount">100K</strong> Retweets</div>
          <div><strong id="qtCount">25K</strong> Quote Tweets</div>
          <div><strong id="lkCount">20K</strong> Likes</div>
        </div>

        <!-- AUTHENTIC OUTLINE ICONS -->
        <div class="tweet-actions">
          <!-- Comment Icon (Fixed: Thin Outline) -->
          <svg viewBox="0 0 24 24" class="action-icon">
            <g><path d="M14.046 2.242l-4.148-.01h-.002c-4.374 0-7.8 3.427-7.8 7.802 0 4.098 3.186 7.206 7.465 7.37v3.828c0 .108.044.286.12.403.142.225.384.347.632.347.138 0 .277-.038.402-.118.264-.168 6.473-4.14 8.088-5.506 1.902-1.61 3.04-3.97 3.043-6.312v-.017c-.006-4.367-3.43-7.787-7.8-7.788zm3.787 12.972c-1.134.96-4.862 3.405-6.772 4.643V16.67c0-.414-.335-.75-.75-.75h-.396c-3.66 0-6.318-2.476-6.318-5.886 0-3.534 2.768-6.302 6.3-6.302l4.147.01h.002c3.532 0 6.3 2.766 6.302 6.296-.003 1.91-.942 3.844-2.514 5.176z"></path></g>
          </svg>
          
          <!-- Retweet Icon (Fixed: Outline) -->
          <svg viewBox="0 0 24 24" class="action-icon">
            <g><path d="M4.5 3.88l4.432 4.14-1.364 1.46L5.5 7.55V16c0 1.1.896 2 2 2H13v2H7.5c-2.209 0-4-1.79-4-4V7.55L1.432 9.48.068 8.02 4.5 3.88zM16.5 6H11V4h5.5c2.209 0 4 1.79 4 4v8.45l2.068-1.93 1.364 1.46-4.432 4.14-4.432-4.14 1.364-1.46 2.068 1.93V8c0-1.1-.896-2-2-2z"></path></g>
          </svg>
          
          <!-- Like Icon (Fixed: Thin Outline) -->
          <svg viewBox="0 0 24 24" class="action-icon">
            <g><path d="M16.697 5.5c-1.222-.06-2.679.51-3.89 2.16l-.805 1.09-.806-1.09C9.984 6.01 8.526 5.44 7.304 5.5c-1.243.07-2.349.78-2.91 1.91-.552 1.12-.633 2.78.479 4.82 1.074 1.97 3.257 4.27 7.129 6.61 3.87-2.34 6.052-4.64 7.126-6.61 1.111-2.04 1.03-3.7.477-4.82-.561-1.13-1.666-1.84-2.908-1.91zm4.187 7.69c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"></path></g>
          </svg>
          
          <!-- Share Icon (Fixed: Outline) -->
          <svg viewBox="0 0 24 24" class="action-icon">
             <g><path d="M12 2.59l5.7 5.7-1.41 1.42L13 6.41V16h-2V6.41l-3.3 3.3-1.41-1.42L12 2.59zM21 15l-.02 3.51c0 1.38-1.12 2.49-2.5 2.49H5.5C4.11 21 3 19.88 3 18.5V15h2v3.5c0 .28.22.5.5.5h12.98c.28 0 .5-.22.5-.5L19 15h2z"></path></g>
          </svg>
        </div>
      </div>

      <div style="margin-top:12px; width: 100%;">
        <div id="outArea" class="out-area"></div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script>
    const inputName = document.getElementById('inputName');
    const inputHandle = document.getElementById('inputHandle');
    const inputAvatar = document.getElementById('inputAvatar');
    const inputText = document.getElementById('inputText');
    const inputTime = document.getElementById('inputTime');
    const bgMode = document.getElementById('bgMode');
    const fontMode = document.getElementById('fontMode');
    const verified = document.getElementById('verified');
    const showAvatar = document.getElementById('showAvatar');
    const likes = document.getElementById('likes');
    const retweets = document.getElementById('retweets');
    const quotes = document.getElementById('quotes');
    const previewBtn = document.getElementById('previewBtn');
    const genBtn = document.getElementById('genBtn');
    const randomize = document.getElementById('randomize');
    
    const previewArea = document.getElementById('previewArea');
    const nameEl = document.getElementById('nameEl');
    const handleEl = document.getElementById('handleEl');
    const verifiedEl = document.getElementById('verifiedEl');
    const avatarEl = document.getElementById('avatarEl');
    const textEl = document.getElementById('textEl');
    const timeEl = document.getElementById('timeEl');
    const rtCount = document.getElementById('rtCount');
    const qtCount = document.getElementById('qtCount');
    const lkCount = document.getElementById('lkCount');
    const outArea = document.getElementById('outArea');
    const previewWrap = document.getElementById('previewWrap');

    function formatLocal(dtStr){
      if(!dtStr) return "5:27 PM ¬∑ Nov 5, 2025"; 
      const d = new Date(dtStr);
      if(isNaN(d)) return dtStr;
      const timeOpt = { hour:'numeric', minute:'2-digit' };
      const dateOpt = { month:'short', day:'numeric', year:'numeric' };
      return d.toLocaleString('en-US', timeOpt) + " ¬∑ " + d.toLocaleString('en-US', dateOpt);
    }

    function updatePreview(){
      nameEl.textContent = inputName.value || 'Name';
      handleEl.textContent = '@' + (inputHandle.value || 'username');
      textEl.textContent = inputText.value || '';
      timeEl.textContent = formatLocal(inputTime.value);
      rtCount.textContent = retweets.value || '0';
      qtCount.textContent = quotes.value || '0';
      lkCount.textContent = likes.value || '0';

      verifiedEl.style.display = verified.checked ? 'inline-flex' : 'none';
      avatarEl.style.display = showAvatar.checked ? 'flex' : 'none';

      previewWrap.classList.remove('dark','dim','light');
      if(bgMode.value === 'dark'){ 
        previewWrap.classList.add('dark'); 
        previewArea.classList.add('dark'); 
        previewArea.classList.remove('dim'); 
      }
      else if(bgMode.value === 'dim'){ 
        previewWrap.classList.add('dim'); 
        previewArea.classList.add('dim'); 
        previewArea.classList.remove('dark'); 
      }
      else { 
        previewWrap.classList.add('light'); 
        previewArea.classList.remove('dark','dim'); 
      }

      if(fontMode.value === 'system'){ previewArea.style.fontFamily = 'system-ui, -apple-system, Roboto, Arial'; }
      else { previewArea.style.fontFamily = 'Inter, system-ui, -apple-system, Roboto, Arial'; }
    }

    inputAvatar.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if(!file) return;
      const fr = new FileReader();
      fr.onload = () => {
        avatarEl.style.backgroundImage = `url(${fr.result})`;
        avatarEl.textContent = '';
      };
      fr.readAsDataURL(file);
    });

    randomize.addEventListener('click', () => {
      likes.value = Math.floor(Math.random()*900) + "K";
      retweets.value = Math.floor(Math.random()*500) + "K";
      quotes.value = Math.floor(Math.random()*100) + "K";
      updatePreview();
    });

    previewBtn.addEventListener('click', () => {
      updatePreview();
      previewArea.style.transition = 'box-shadow 0.25s';
      previewArea.style.boxShadow = '0 8px 30px rgba(0,0,0,0.15)';
      setTimeout(()=> previewArea.style.boxShadow = '', 600);
    });

    [inputName,inputHandle,inputText,inputTime,bgMode,fontMode,verified,showAvatar,likes,retweets,quotes].forEach(el=>{
      if(!el) return;
      el.addEventListener('input', updatePreview);
      if(el.type === 'checkbox') el.addEventListener('change', updatePreview);
    });

    updatePreview();

    genBtn.addEventListener('click', async () => {
      updatePreview();
      outArea.innerHTML = '';
      genBtn.disabled = true;
      genBtn.textContent = 'Processing...';

      const clone = previewArea.cloneNode(true);
      // Fixed width for mobile consistency
      const targetWidth = 450; 
      
      clone.style.width = targetWidth + 'px';
      clone.style.maxWidth = 'none';
      clone.style.padding = '16px'; 
      clone.style.borderRadius = '0';
      clone.style.border = 'none';
      
      const container = document.createElement('div');
      
      if(bgMode.value === 'dark') container.classList.add('dark');
      if(bgMode.value === 'dim') container.classList.add('dim');

      container.style.position = 'fixed';
      container.style.left = '-9999px';
      container.style.top = '0';
      container.appendChild(clone);
      document.body.appendChild(container);

      let renderBg = '#ffffff';
      if(bgMode.value === 'dark') renderBg = '#000000';
      else if(bgMode.value === 'dim') renderBg = '#15202b';

      try{
        const canvas = await html2canvas(clone, {
          scale: 3, 
          useCORS: true,
          allowTaint: true,
          backgroundColor: renderBg
        });

        const url = canvas.toDataURL('image/png');
        const a = document.createElement('a');
        a.href = url;
        a.download = `tweet_icon_fixed_${Date.now()}.png`;
        a.textContent = 'Download Image';
        a.className = 'btn btn-primary';
        a.style.display = 'inline-block';
        a.style.marginTop = '8px';

        const img = new Image();
        img.src = url;
        img.style.maxWidth = '360px'; 
        
        outArea.appendChild(a);
        outArea.appendChild(document.createElement('br'));
        outArea.appendChild(img);
      }catch(err){
        console.error(err);
        alert('Error generating image.');
      }finally{
        document.body.removeChild(container);
        genBtn.disabled = false;
        genBtn.textContent = 'Generate Image';
      }
    });
  </script>
</body>
</html>